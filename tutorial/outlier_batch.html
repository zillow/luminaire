<!DOCTYPE html> <html lang=en  data-content_root="../"> <meta charset=utf-8  /> <meta name=viewport  content="width=device-width, initial-scale=1.0" /><meta name=viewport  content="width=device-width, initial-scale=1" /> <meta name=viewport  content="width=device-width,initial-scale=1"> <meta http-equiv=x-ua-compatible  content="ie=edge"> <meta name="lang:clipboard.copy" content="Copy to clipboard"> <meta name="lang:clipboard.copied" content="Copied to clipboard"> <meta name="lang:search.language" content=en > <meta name="lang:search.pipeline.stopwords" content=True > <meta name="lang:search.pipeline.trimmer" content=True > <meta name="lang:search.result.none" content="No matching documents"> <meta name="lang:search.result.one" content="1 matching document"> <meta name="lang:search.result.other" content="# matching documents"> <meta name="lang:search.tokenizer" content="[\s\-]+"> <link href="https://fonts.gstatic.com/" rel=preconnect  crossorigin> <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;700&family=Nunito+Sans:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel=stylesheet > <link rel=stylesheet  href="../_static/stylesheets/application.css"/> <link rel=stylesheet  href="../_static/stylesheets/application-palette.css"/> <link rel=stylesheet  href="../_static/stylesheets/application-fixes.css"/> <link rel=stylesheet  href="../_static/fonts/material-icons.css"/> <meta name=theme-color  content="#3f51b5"> <script src="../_static/javascripts/modernizr.js"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-119269936-5"></script> <script> window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'UA-119269936-5'); </script> <title>Outlier Detection &#8212; Luminaire</title> <link rel=stylesheet  href="../_static/global.css"> <link rel=stylesheet  href="../_static/colors.css"> <link rel=stylesheet  type="text/css" href="../_static/pygments.css?v=d75fae25" /> <link rel=stylesheet  type="text/css" href="../_static/material.css?v=79c92029" /> <script src="../_static/documentation_options.js?v=01f34227"></script> <script src="../_static/doctools.js?v=9bcbadda"></script> <script src="../_static/sphinx_highlight.js?v=dc90522c"></script> <link rel=index  title=Index  href="../genindex.html" /> <link rel=search  title=Search  href="../search.html" /> <link rel=next  title="Anomaly Detection for Streaming data" href=streaming.html  /> <link rel=prev  title="Configuration Optimization" href=optimization.html  /> <body dir=ltr data-md-color-primary=custom data-md-color-accent=custom> <svg class=md-svg > <defs data-children-count=0 > <svg xmlns="http://www.w3.org/2000/svg" width=416  height=448  viewBox="0 0 416 448" id=__github ><path fill=currentColor  d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg> </defs> </svg> <input class=md-toggle  data-md-toggle=drawer  type=checkbox  id=__drawer > <input class=md-toggle  data-md-toggle=search  type=checkbox  id=__search > <label class=md-overlay  data-md-component=overlay  for=__drawer ></label> <a href="#tutorial/outlier_batch" tabindex=1  class=md-skip > Skip to content </a> <header class=md-header  data-md-component=header > <nav class="md-header-nav md-grid"> <div class="md-flex navheader"> <div class="md-flex__cell md-flex__cell--shrink"> <a href="../index.html" title=Luminaire  class="md-header-nav__button md-logo"> &nbsp; </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer ></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title > <span class=md-header-nav__topic >Luminaire</span> <span class=md-header-nav__topic > Outlier Detection </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--search md-header-nav__button" for=__search ></label> <div class=md-search  data-md-component=search  role=dialog > <label class=md-search__overlay  for=__search ></label> <div class=md-search__inner  role=search > <form class=md-search__form  action="../search.html" method=get  name=search > <input type=text  class=md-search__input  name=q  placeholder=""Search"" autocapitalize=off  autocomplete=off  spellcheck=false  data-md-component=query  data-md-state=active > <label class="md-icon md-search__icon" for=__search ></label> <button type=reset  class="md-icon md-search__icon" data-md-component=reset  tabindex=-1 > &#xE5CD; </button> </form> <div class=md-search__output > <div class=md-search__scrollwrap  data-md-scrollfix> <div class=md-search-result  data-md-component=result > <div class=md-search-result__meta > Type to start searching </div> <ol class=md-search-result__list ></ol> </div> </div> </div> </div> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <div class=md-header-nav__source > <a href="https://github.com/zillow/luminaire/" title="Go to repository" class=md-source  data-md-source=github > <div class=md-source__icon > <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width=28  height=28 > <use xlink:href="#__github" width=24  height=24 ></use> </svg> </div> <div class=md-source__repository > Fork me on Github </div> </a> </div> </div> <script src="../_static/javascripts/version_dropdown.js"></script> <script> var json_loc = "../"versions.json"", target_loc = "../../", text = "Versions"; $( document ).ready( add_version_dropdown(json_loc, target_loc, text)); </script> </div> </nav> </header> <div class=md-container > <main class=md-main > <div class="md-main__inner md-grid" data-md-component=container > <div class="md-sidebar md-sidebar--primary" data-md-component=navigation > <div class=md-sidebar__scrollwrap > <div class=md-sidebar__inner > <nav class="md-nav md-nav--primary" data-md-level=0 > <label class="md-nav__title md-nav__title--site" for=__drawer > <a href="../index.html" title=Luminaire  class="md-nav__button md-logo"> <img src="../_static/" alt=" logo" width=48  height=48 > </a> <a href="../index.html" title=Luminaire >Luminaire</a> </label> <div class=md-nav__source > <a href="https://github.com/zillow/luminaire/" title="Go to repository" class=md-source  data-md-source=github > <div class=md-source__icon > <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width=28  height=28 > <use xlink:href="#__github" width=24  height=24 ></use> </svg> </div> <div class=md-source__repository > Fork me on Github </div> </a> </div> <ul class=md-nav__list > <li class=md-nav__item > <span class="md-nav__link caption"><span class=caption-text >Tutorial</span></span> <li class=md-nav__item > <a href=dataprofiling.html  class=md-nav__link >Data Profiling</a> <li class=md-nav__item > <a href=optimization.html  class=md-nav__link >Configuration Optimization</a> <li class=md-nav__item > <input class="md-toggle md-nav__toggle" data-md-toggle=toc  type=checkbox  id=__toc > <label class="md-nav__link md-nav__link--active" for=__toc > Outlier Detection </label> <a href="#" class="md-nav__link md-nav__link--active">Outlier Detection</a> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title  for=__toc >"Contents"</label> <ul class=md-nav__list  data-md-scrollfix=""> <li class=md-nav__item ><a href="#tutorial-outlier-batch--page-root" class=md-nav__link >Outlier Detection</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#anomaly-detection-using-structural-model" class=md-nav__link >Anomaly Detection using Structural Model</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#forecasting" class=md-nav__link >Forecasting</a> </ul> </nav> <li class=md-nav__item ><a href="#anomaly-detection-using-filtering-model" class=md-nav__link >Anomaly Detection using Filtering Model</a> </ul> </nav> </ul> </nav> <li class=md-nav__item > <a href=streaming.html  class=md-nav__link >Anomaly Detection for Streaming data</a> <li class=md-nav__item > <span class="md-nav__link caption"><span class=caption-text >API Reference</span></span> <li class=md-nav__item > <a href="../api_reference/batch_models.html" class=md-nav__link >Luminaire Outlier Detection Models: Structural Modeling</a> <li class=md-nav__item > <a href="../api_reference/batch_models.html#module-luminaire.model.model_utils" class=md-nav__link >Luminaire Outlier Detection Models: Factoring holidays as exogenous</a> <li class=md-nav__item > <a href="../api_reference/batch_models.html#module-luminaire.model.lad_filtering" class=md-nav__link >Luminaire Outlier Detection Models: Kalman Filter</a> <li class=md-nav__item > <a href="../api_reference/exploration.html" class=md-nav__link >Data Exploration and Profiling</a> <li class=md-nav__item > <a href="../api_reference/optimization.html" class=md-nav__link >Luminaire Configuration Optimization</a> <li class=md-nav__item > <a href="../api_reference/streaming.html" class=md-nav__link >Luminaire Streaming Anomaly Detection Models: Window Density Model</a> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc > <div class=md-sidebar__scrollwrap > <div class=md-sidebar__inner > <nav class="md-nav md-nav--secondary"> <label class=md-nav__title  for=__toc >"Contents"</label> <ul class=md-nav__list  data-md-scrollfix=""> <li class=md-nav__item ><a href="#tutorial-outlier-batch--page-root" class=md-nav__link >Outlier Detection</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#anomaly-detection-using-structural-model" class=md-nav__link >Anomaly Detection using Structural Model</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#forecasting" class=md-nav__link >Forecasting</a> </ul> </nav> <li class=md-nav__item ><a href="#anomaly-detection-using-filtering-model" class=md-nav__link >Anomaly Detection using Filtering Model</a> </ul> </nav> </ul> </nav> </div> </div> </div> <div class=md-content > <article class="md-content__inner md-typeset" role=main > <section id=outlier-detection > <h1 id=tutorial-outlier-batch--page-root >Outlier Detection<a class=headerlink  href="#tutorial-outlier-batch--page-root" title="Link to this heading">¶</a></h1> <p>Luminaire can detect outliers in time series data by modeling the predictive and the variational patterns of a time series trajectory. Luminaire is capable of tracking outliers for any time series data by applying two specific modeling capabilities:</p> <ul class=simple > <li><p><strong>Structural Model</strong>: This technique is suitable for time series datasets that show periodic patterns and contains good predictive signals through temporal correlations.</p> <li><p><strong>Filtering Model</strong>: This technique is suitable for noisy time series datasets that contains almost no predictive signals from the periodic or temporal correlation signals.</p> </ul> <section id=anomaly-detection-using-structural-model > <h2 id=anomaly-detection-using-structural-model >Anomaly Detection using Structural Model<a class=headerlink  href="#anomaly-detection-using-structural-model" title="Link to this heading">¶</a></h2> <img alt="../_images/structural.png" src="../_images/structural.png"/> <p>Luminaire provides the full capability to have user-specified configuration for structural modeling. Under the hood, Luminaire implements a linear or an exponential model allowing multiple user specified auto regressive and moving average components to track any temporal correlational patterns. Fourier transformation can also be applied under the hood if the data shows strong seasonality or periodic patterns. As external structural information, Luminaire allows holidays to be added as external exogenous features (currently supported for daily data only) inside the structural model.</p> <div class="doctest highlight-default notranslate"><div class=highlight ><pre><span></span><span class=gp >&gt;&gt;&gt; </span><span class=kn >from</span><span class=w > </span><span class=nn >luminaire.model.lad_structural</span><span class=w > </span><span class=kn >import</span> <span class=n >LADStructuralModel</span>
<span class=gp >&gt;&gt;&gt; </span><span class=n >hyper_params</span> <span class=o >=</span> <span class=p >{</span><span class=s2 >"include_holidays_exog"</span><span class=p >:</span> <span class=kc >True</span><span class=p >,</span> <span class=s2 >"is_log_transformed"</span><span class=p >:</span> <span class=kc >False</span><span class=p >,</span> <span class=s2 >"max_ft_freq"</span><span class=p >:</span> <span class=mi >5</span><span class=p >,</span> <span class=s2 >"p"</span><span class=p >:</span> <span class=mi >3</span><span class=p >,</span> <span class=s2 >"q"</span><span class=p >:</span> <span class=mi >3</span><span class=p >}</span>
<span class=gp >&gt;&gt;&gt; </span><span class=n >lad_struct_obj</span> <span class=o >=</span> <span class=n >LADStructuralModel</span><span class=p >(</span><span class=n >hyper_params</span><span class=o >=</span><span class=n >hyper_params</span><span class=p >,</span> <span class=n >freq</span><span class=o >=</span><span class=s1 >'D'</span><span class=p >)</span>
<span class=gp >&gt;&gt;&gt; </span><span class=nb >print</span><span class=p >(</span><span class=n >lad_struct_obj</span><span class=p >)</span>
<span class=go >&lt;luminaire_models.model.lad_structural.LADStructuralModel object at 0x7fc91882bb38&gt;</span>
</pre></div> </div> <p>Luminaire allows some data-specific information to be added during the training process of the structural model through <em>preprocessing_parameters</em>. The <em>preprocessing_parameters</em> can either be specified by the user if the data-specific information is available through external sources OR can be obtained using <em>Luminaire DataExploration</em>. The data-specific information includes a list of trend changes, change points (data shifts), and start and end of the input time series.</p> <div class="doctest highlight-default notranslate"><div class=highlight ><pre><span></span><span class=gp >&gt;&gt;&gt; </span><span class=kn >from</span><span class=w > </span><span class=nn >luminaire.exploration.data_exploration</span><span class=w > </span><span class=kn >import</span> <span class=n >DataExploration</span>
<span class=gp >&gt;&gt;&gt; </span><span class=n >de_obj</span> <span class=o >=</span> <span class=n >DataExploration</span><span class=p >(</span><span class=n >freq</span><span class=o >=</span><span class=s1 >'D'</span><span class=p >,</span> <span class=n >data_shift_truncate</span><span class=o >=</span><span class=kc >False</span><span class=p >,</span> <span class=n >is_log_transformed</span><span class=o >=</span><span class=kc >True</span><span class=p >,</span> <span class=n >fill_rate</span><span class=o >=</span><span class=mf >0.9</span><span class=p >)</span>
<span class=gp >&gt;&gt;&gt; </span><span class=n >data</span><span class=p >,</span> <span class=n >pre_prc</span> <span class=o >=</span> <span class=n >de_obj</span><span class=o >.</span><span class=n >profile</span><span class=p >(</span><span class=n >data</span><span class=p >)</span>
<span class=gp >&gt;&gt;&gt; </span><span class=nb >print</span><span class=p >(</span><span class=n >pre_prc</span><span class=p >)</span>
<span class=go >{'success': True, 'trend_change_list': ['2020-04-01 00:00:00'], 'change_point_list': ['2020-03-16 00:00:00'],</span>
<span class=go >'is_log_transformed': 1, 'min_ts_mean': None, 'ts_start': '2020-01-01 00:00:00', 'ts_end': '2020-06-07 00:00:00'}</span>
</pre></div> </div> <p>These <em>preprocessing_parameters</em> are used for training the structural model.</p> <div class="doctest highlight-default notranslate"><div class=highlight ><pre><span></span><span class=gp >&gt;&gt;&gt; </span><span class=n >success</span><span class=p >,</span> <span class=n >model_date</span><span class=p >,</span> <span class=n >model</span> <span class=o >=</span> <span class=n >lad_struct_obj</span><span class=o >.</span><span class=n >train</span><span class=p >(</span><span class=n >data</span><span class=o >=</span><span class=n >data</span><span class=p >,</span> <span class=o >**</span><span class=n >pre_prc</span><span class=p >)</span>
<span class=gp >&gt;&gt;&gt; </span><span class=nb >print</span><span class=p >(</span><span class=n >success</span><span class=p >,</span> <span class=n >model_date</span><span class=p >,</span> <span class=n >model</span><span class=p >)</span>
<span class=go >(True, '2020-06-07 00:00:00', &lt;luminaire_models.model.lad_structural.LADStructuralModel object at 0x7f97e127d320&gt;)</span>
</pre></div> </div> <div class="admonition note"> <p class=admonition-title >Note</p> <p>Luminaire allows to run model validation during the training process. This validation is a check for any underfit that might have occurred due to any misspecification of the model hyperparameters or due to nonstationarity. Validation flag is set to false by default but that can be turned on by simply setting <em>validation = True</em> during training. This option is only available for the <em>LADStructuralModel</em> class. Refer to the API reference for more information.</p> </div> <p>The trained model works as a data-driven source of truth to evaluate any future time series values to be monitored. The <em>score</em> method is used to check whether new data points are anomalous.</p> <div class="doctest highlight-default notranslate"><div class=highlight ><pre><span></span><span class=gp >&gt;&gt;&gt; </span><span class=n >model</span><span class=o >.</span><span class=n >score</span><span class=p >(</span><span class=mi >2000</span><span class=p >,</span> <span class=s1 >'2020-06-08'</span><span class=p >)</span>
<span class=go >{'Success': True, 'IsLogTransformed': 1, 'LogTransformedAdjustedActual': 7.601402334583733, 'LogTransformedPrediction': 7.85697078664991, 'LogTransformedStdErr': 0.05909378128162875, 'LogTransformedCILower': 7.759770166178546, 'LogTransformedCIUpper': 7.954171407121274, 'AdjustedActual': 2000.000000000015, 'Prediction': 1913.333800801316, 'StdErr': 111.1165409184448, 'CILower': 1722.81265596681, 'CIUpper': 2093.854945635823, 'ConfLevel': 90.0, 'ExogenousHolidays': 0, 'IsAnomaly': False, 'IsAnomalyExtreme': False, 'AnomalyProbability': 0.5616869199903785, 'DownAnomalyProbability': 0.21915654000481077, 'UpAnomalyProbability': 0.7808434599951892, 'ModelFreshness': 0.1}</span>
<span class=gp >&gt;&gt;&gt; </span><span class=n >model</span><span class=o >.</span><span class=n >score</span><span class=p >(</span><span class=mi >2500</span><span class=p >,</span> <span class=s1 >'2020-06-09'</span><span class=p >)</span>
<span class=go >{'Success': True, 'IsLogTransformed': 1, 'LogTransformedAdjustedActual': 7.824445930877619, 'LogTransformedPrediction': 7.879245788204654, 'LogTransformedStdErr': 0.060630109233816995, 'LogTransformedCILower': 7.779518133128947, 'LogTransformedCIUpper': 7.978973443280362, 'AdjustedActual': 2500.000000000004, 'Prediction': 1955.906824510712, 'StdErr': 116.8279277089905, 'CILower': 1763.74860305128, 'CIUpper': 2158.065045970143, 'ConfLevel': 90.0, 'ExogenousHolidays': 0, 'IsAnomaly': True, 'IsAnomalyExtreme': True, 'AnomalyProbability': 0.9999955054511667, 'DownAnomalyProbability': 2.2472744166668335e-06, 'UpAnomalyProbability': 0.9999977527255833, 'ModelFreshness': 0.2}</span>
</pre></div> </div> <a class="reference internal image-reference" href="../_images/struct_score.png"><img alt="../_images/struct_score.png" src="../_images/struct_score.png" style="width: 627.0px; height: 438.90000000000003px;"/> </a> <p>The scoring function outputs several fields. The key to identifying whether a data point has been detected as an anomaly is the <em>AnomalyProbability</em> field (for anomalous fluctuations in either direction) and <em>DownAnomalyProbability</em>, <em>UpAnomalyProbability</em> for one-sided fluctuations that are lower or higher than expected, respectively. The user can set any anomaly threshold to identify whether a pont is an anomaly or not. From the above example, by setting the anomaly threshold at <em>0.99</em> for both sided fluctuations, we can see the the the value corresponding to <em>2020-06-08</em> is non anomalous whereas the value for <em>2020-06-09</em> is anomalous. Luminaire also has its own pre-specified thresholds at <em>0.9</em> and at <em>0.999</em> for identifying mild an extreme anomalies (see the keys <em>IsAnomaly</em> and <em>IsAnomalyExtreme</em>).</p> <p>Luminaire generates a <em>ModelFreshness</em> score to identify how fresh the model is (i.e. what is the difference between the scoring data date and the model date). This freshness scores varies between 0 to 1 and the model object expires whenever the freshness score exceeds the value 1.</p> <section id=forecasting > <h3 id=forecasting >Forecasting<a class=headerlink  href="#forecasting" title="Link to this heading">¶</a></h3> <p>Since the anomaly detection process through structural modeling depends on quantifying the predictive and the variational patterns of the underlying data, Luminaire also outputs several forecasting metrics such as <em>Prediction</em>, <em>StdErr</em>, <em>CILower</em> and <em>CIUpper</em> that can be used for time series forecasting use cases.</p> <div class="admonition note"> <p class=admonition-title >Note</p> <p>The <em>ConfLevel</em> in the scoring output corresponds to the generated confidence intervals and to the <em>IsAnomaly</em> flag</p> </div> </section> </section> <section id=anomaly-detection-using-filtering-model > <h2 id=anomaly-detection-using-filtering-model >Anomaly Detection using Filtering Model<a class=headerlink  href="#anomaly-detection-using-filtering-model" title="Link to this heading">¶</a></h2> <a class="reference internal image-reference" href="../_images/filter.png"><img alt="../_images/filter.png" src="../_images/filter.png" style="width: 767.8000000000001px; height: 299.20000000000005px;"/> </a> <p>Luminaire allows monitoring noisy and not too well behaved time series data by tracking the residual process from a filtering model. This model should not be used for predictive purposes but can be used to measure variational patterns and irregular fluctuations.</p> <p>Filtering requires very minimal specification in terms of configurations. The user needs to only configure whether to implement a linear or exponential model.</p> <div class="doctest highlight-default notranslate"><div class=highlight ><pre><span></span><span class=gp >&gt;&gt;&gt; </span><span class=kn >from</span><span class=w > </span><span class=nn >luminaire.model.lad_filtering</span><span class=w > </span><span class=kn >import</span> <span class=n >LADFilteringModel</span>
<span class=gp >&gt;&gt;&gt; </span><span class=n >hyper_params</span> <span class=o >=</span> <span class=p >{</span><span class=s2 >"is_log_transformed"</span><span class=p >:</span> <span class=mi >1</span><span class=p >}</span>
<span class=gp >&gt;&gt;&gt; </span><span class=n >lad_filter_obj</span> <span class=o >=</span> <span class=n >LADFilteringModel</span><span class=p >(</span><span class=n >hyper_params</span><span class=o >=</span><span class=n >hyper_params</span><span class=p >,</span> <span class=n >freq</span><span class=o >=</span><span class=s1 >'D'</span><span class=p >)</span>
<span class=gp >&gt;&gt;&gt; </span><span class=nb >print</span><span class=p >(</span><span class=n >lad_filter_obj</span><span class=p >)</span>
<span class=go >&lt;luminaire_models.model.lad_filtering.LADFilteringModel object at 0x7fd2b1832dd8&gt;</span>
</pre></div> </div> <p>Similar to the structural model, the user can specify the <em>preprocessing_parameters</em> (see <a class="reference external" href="https://zillow.github.io/luminaire/tutorial/outlier_batch.html#anomaly-detection-using-structural-model">Structural Modeling Tutorial</a> for further information). These <em>preprocessing_parameters</em> are required to train the Luminaire filtering model.</p> <div class="doctest highlight-default notranslate"><div class=highlight ><pre><span></span><span class=gp >&gt;&gt;&gt; </span><span class=n >success</span><span class=p >,</span> <span class=n >model_date</span><span class=p >,</span> <span class=n >model</span> <span class=o >=</span> <span class=n >lad_filter_obj</span><span class=o >.</span><span class=n >train</span><span class=p >(</span><span class=n >data</span><span class=o >=</span><span class=n >data</span><span class=p >,</span> <span class=o >**</span><span class=n >pre_prc</span><span class=p >)</span>
<span class=gp >&gt;&gt;&gt; </span><span class=nb >print</span><span class=p >(</span><span class=n >success</span><span class=p >,</span> <span class=n >model_date</span><span class=p >,</span> <span class=n >model</span><span class=p >)</span>
<span class=go >(True, '2019-08-27 00:00:00', &lt;luminaire_models.model.lad_filtering.LADFilteringModel object at 0x7fd2aef00278&gt;)</span>
</pre></div> </div> <p>Similar to the structural model, this trained filtering model can be used to score any future time series values. Moreover, the filtering model updates some components of the model object every time it scores to keep the variational information updated.</p> <div class="doctest highlight-default notranslate"><div class=highlight ><pre><span></span><span class=gp >&gt;&gt;&gt; </span><span class=n >scores</span><span class=p >,</span> <span class=n >model_update</span> <span class=o >=</span> <span class=n >model</span><span class=o >.</span><span class=n >score</span><span class=p >(</span><span class=mi >400</span><span class=p >,</span> <span class=s1 >'2019-08-28'</span><span class=p >)</span>
<span class=gp >&gt;&gt;&gt; </span><span class=nb >print</span><span class=p >(</span><span class=n >scores</span><span class=p >,</span> <span class=n >model_update</span><span class=p >)</span>
<span class=go >({'Success': True, 'AdjustedActual': 1.4535283491638031, 'ConfLevel': 90.0, 'Prediction': 208.36315843605394, 'PredStdErr': 41.36628211756695, 'IsAnomaly': True, 'IsAnomalyExtreme': False, 'AnomalyProbability': 0.9875848462383774, 'DownAnomalyProbability': 0.006207576880811305, 'UpAnomalyProbability': 0.9937924231191887, 'NonStationarityDiffOrder': 1, 'ModelFreshness': 0.1}, &lt;luminaire_models.model.lad_filtering.LADFilteringModel object at 0x7fd2b20a65c0&gt;)</span>
</pre></div> </div> <p>The trained <em>model</em> can only be used to score the next innovation after the training. To score any futher points in the future, the iterative <em>model_update</em> needs to be used.</p> <div class="doctest highlight-default notranslate"><div class=highlight ><pre><span></span><span class=gp >&gt;&gt;&gt; </span><span class=n >scores_2</span><span class=p >,</span> <span class=n >model_update_2</span> <span class=o >=</span> <span class=n >model_update</span><span class=o >.</span><span class=n >score</span><span class=p >(</span><span class=mi >500</span><span class=p >,</span> <span class=s1 >'2019-08-29'</span><span class=p >)</span>
<span class=gp >&gt;&gt;&gt; </span><span class=nb >print</span><span class=p >(</span><span class=n >scores_2</span><span class=p >,</span> <span class=n >model_update_2</span><span class=p >)</span>
<span class=go >({'Success': True, 'AdjustedActual': -0.591849553174421, 'ConfLevel': 90.0, 'Prediction': 349.67004799036243, 'PredStdErr': 69.28590609594112, 'IsAnomaly': True, 'IsAnomalyExtreme': True, 'AnomalyProbability': 0.9999663774928771, 'DownAnomalyProbability': 0.9999831887464385, 'UpAnomalyProbability': 1.681125356141111e-05, 'NonStationarityDiffOrder': 1, 'ModelFreshness': 0.2}, &lt;luminaire_models.model.lad_filtering.LADFilteringModel object at 0x7fd2b1c81e48&gt;)</span>
</pre></div> </div> <a class="reference internal image-reference" href="../_images/filter_score.png"><img alt="../_images/filter_score.png" src="../_images/filter_score.png" style="width: 647.9000000000001px; height: 446.6px;"/> </a> <div class="admonition note"> <p class=admonition-title >Note</p> <p>Prediction for the filtering model is a posterior prediction, which means the prediction is made after observing the data to score. See <a class="reference external" href="https://en.wikipedia.org/wiki/Kalman_filter#Predict">kalman_filter</a> for more information.</p> </div> <div class="admonition note"> <p class=admonition-title >Note</p> <p>It is important to note that the model update process during scoring only updates a small portion of the model component. It is a good practice to train the model over some schedule to acheive the best performance.</p> </div> </section> </section> </article> </div> </div> </main> </div> <footer class=md-footer > <div class=md-footer-nav > <nav class="md-footer-nav__inner md-grid"> <a href=optimization.html  title="Configuration Optimization" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel=prev > <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i> </div> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis > <span class=md-footer-nav__direction > "Previous" </span> Configuration Optimization </span> </div> </a> <a href=streaming.html  title="Anomaly Detection for Streaming data" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel=next > <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span class=md-flex__ellipsis > <span class=md-footer-nav__direction > "Next" </span> Anomaly Detection for Streaming data </span> </div> <div class="md-flex__cell md-flex__cell--shrink"><i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright > <div class=md-footer-copyright__highlight > &#169; Copyright 2020 Zillow, Inc.. </div> Created using <a href="http://www.sphinx-doc.org/">Sphinx</a> 8.1.3. and <a href="https://github.com/bashtage/sphinx-material/">Material for Sphinx</a> </div> </div> </div> </footer> <script src="../_static/javascripts/application.js"></script> <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>